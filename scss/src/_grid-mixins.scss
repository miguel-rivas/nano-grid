@use "sass:math";

/*
  sz50b100      >>  50% or 50/100  :: size 50 in a 100 columns grid
  sz6b12        >>  6/12           :: size 6 in a 12 columns grid
  sz1b16        >>  1/16           :: size 1 in a 16 columns grid
  sz155         >>  155px          :: value in pixels
  sz45b100m50   >>  45/100 - 50px
*/

@mixin set-size($numerator, $denominator, $subtraction: 0, $dimension: 0, $vertical: false) {
  $final-selector: "";
  $c-dimension: nth(("w", "h"), $dimension + 1);
  @if ($vertical) {
    $c-dimension: nth(("h", "w"), $dimension + 1);
  }

  @if $subtraction > 0 {
    $computed-subtraction: $subtraction * 5;
    $final-selector: "&.#{$c-dimension}#{$numerator}b#{$denominator}m#{$computed-subtraction}";

    #{$final-selector} {
      $final-size: unquote("calc(#{math.div($numerator,$denominator)*100}% - #{$computed-subtraction}px)");
      flex-basis: $final-size;
      @if ($vertical) {
        max-height: $final-size;
      } @else {
        max-width: $final-size;
      }
    }
  } @else {
    $final-selector: "&.#{$c-dimension}#{$numerator}b#{$denominator}";

    $final-size: unquote(math.div($numerator, $denominator) * 100 + "%");
    #{$final-selector} {
      @if ($dimension == 0) {
        flex-basis: $final-size;
        @if ($vertical) {
          max-height: $final-size;
        } @else {
          max-width: $final-size;
        }
      } @else {
        @if (not $vertical) {
          height: $final-size;
        }
      }
    }

    @if ($dimension == 1 and not $vertical) {
      #{$final-selector}a {
        $final-size: unquote(math.div($numerator, $denominator) * 100 + "vh");
        height: $final-size;
      }
    }
  }
}

@mixin responsive-grid($tag, $size) {
  &.#{$tag} {
    @media only screen and (max-width: $size) {
      display: block;
      margin-right: 0 !important;
      margin-left: 0 !important;
      > .column,
      > .prefix,
      > .suffix {
        width: 100% !important;
        max-width: unset !important;
        min-width: unset !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
    }
  }
}

%grid {
  &.horizontal {
    > .column,
    > .prefix,
    > .suffix {
      @for $subtraction from 0 through 120 {
        @include set-size(1, 1, $subtraction); //100
        @include set-size(19, 20, $subtraction); //95
        @include set-size(11, 12, $subtraction);
        @include set-size(9, 10, $subtraction); //90
        @include set-size(17, 20, $subtraction); //85
        @include set-size(5, 6, $subtraction); //83
        @include set-size(4, 5, $subtraction); //80
        @include set-size(3, 4, $subtraction); //75
        @include set-size(7, 10, $subtraction); //70
        @include set-size(2, 3, $subtraction);
        @include set-size(13, 20, $subtraction); //65
        @include set-size(3, 5, $subtraction); //60
        @include set-size(7, 12, $subtraction);
        @include set-size(11, 20, $subtraction); //55
        @include set-size(1, 2, $subtraction); //50
        @include set-size(9, 20, $subtraction); //45
        @include set-size(5, 12, $subtraction);
        @include set-size(2, 5, $subtraction); //40
        @include set-size(7, 20, $subtraction); //35
        @include set-size(1, 3, $subtraction);
        @include set-size(3, 10, $subtraction); //30
        @include set-size(1, 4, $subtraction); //25
        @include set-size(1, 5, $subtraction); //20
        @include set-size(1, 6, $subtraction);
        @include set-size(3, 20, $subtraction); //15
        @include set-size(1, 7, $subtraction);
        @include set-size(1, 8, $subtraction);
        @include set-size(1, 9, $subtraction);
        @include set-size(1, 10, $subtraction); //10
        @include set-size(1, 11, $subtraction);
        @include set-size(1, 12, $subtraction);
        @include set-size(1, 13, $subtraction);
        @include set-size(1, 14, $subtraction);
        @include set-size(1, 15, $subtraction);
        @include set-size(1, 16, $subtraction);
        @include set-size(1, 17, $subtraction);
        @include set-size(1, 18, $subtraction);
        @include set-size(1, 19, $subtraction);
        @include set-size(1, 20, $subtraction); //5
      }

      @include set-size(1, 1, 0, 1);
      @include set-size(19, 20, 0, 1);
      @include set-size(9, 10, 0, 1);
      @include set-size(17, 20, 0, 1);
      @include set-size(4, 5, 0, 1);
      @include set-size(3, 4, 0, 1);
      @include set-size(7, 10, 0, 1);
      @include set-size(13, 20, 0, 1);
      @include set-size(3, 5, 0, 1);
      @include set-size(11, 20, 0, 1);
      @include set-size(1, 2, 0, 1);
      @include set-size(9, 20, 0, 1);
      @include set-size(2, 5, 0, 1);
      @include set-size(7, 20, 0, 1);
      @include set-size(3, 10, 0, 1);
      @include set-size(1, 4, 0, 1);
      @include set-size(1, 5, 0, 1);
      @include set-size(3, 20, 0, 1);
      @include set-size(1, 10, 0, 1);
      @include set-size(1, 20, 0, 1);

      @extend %fix-columns;
    }
  }

  &.vertical {
    > .column,
    > .prefix,
    > .suffix {
      @for $subtraction from 0 through 120 {
        @include set-size(1, 1, $subtraction, $vertical: true); //100
        @include set-size(19, 20, $subtraction, $vertical: true); //95
        @include set-size(11, 12, $subtraction, $vertical: true);
        @include set-size(9, 10, $subtraction, $vertical: true); //90
        @include set-size(17, 20, $subtraction, $vertical: true); //85
        @include set-size(5, 6, $subtraction, $vertical: true); //83
        @include set-size(4, 5, $subtraction, $vertical: true); //80
        @include set-size(3, 4, $subtraction, $vertical: true); //75
        @include set-size(7, 10, $subtraction, $vertical: true); //70
        @include set-size(2, 3, $subtraction, $vertical: true);
        @include set-size(13, 20, $subtraction, $vertical: true); //65
        @include set-size(3, 5, $subtraction, $vertical: true); //60
        @include set-size(7, 12, $subtraction, $vertical: true);
        @include set-size(11, 20, $subtraction, $vertical: true); //55
        @include set-size(1, 2, $subtraction, $vertical: true); //50
        @include set-size(9, 20, $subtraction, $vertical: true); //45
        @include set-size(5, 12, $subtraction, $vertical: true);
        @include set-size(2, 5, $subtraction, $vertical: true); //40
        @include set-size(7, 20, $subtraction, $vertical: true); //35
        @include set-size(1, 3, $subtraction, $vertical: true);
        @include set-size(3, 10, $subtraction, $vertical: true); //30
        @include set-size(1, 4, $subtraction, $vertical: true); //25
        @include set-size(1, 5, $subtraction, $vertical: true); //20
        @include set-size(1, 6, $subtraction, $vertical: true);
        @include set-size(3, 20, $subtraction, $vertical: true); //15
        @include set-size(1, 7, $subtraction, $vertical: true);
        @include set-size(1, 8, $subtraction, $vertical: true);
        @include set-size(1, 9, $subtraction, $vertical: true);
        @include set-size(1, 10, $subtraction, $vertical: true); //10
        @include set-size(1, 11, $subtraction, $vertical: true);
        @include set-size(1, 12, $subtraction, $vertical: true);
        @include set-size(1, 13, $subtraction, $vertical: true);
        @include set-size(1, 14, $subtraction, $vertical: true);
        @include set-size(1, 15, $subtraction, $vertical: true);
        @include set-size(1, 16, $subtraction, $vertical: true);
        @include set-size(1, 17, $subtraction, $vertical: true);
        @include set-size(1, 18, $subtraction, $vertical: true);
        @include set-size(1, 19, $subtraction, $vertical: true);
        @include set-size(1, 20, $subtraction, $vertical: true); //5
      }

      @include set-size(1, 1, 0, 1, $vertical: true);
      @include set-size(19, 20, 0, 1, $vertical: true);
      @include set-size(9, 10, 0, 1, $vertical: true);
      @include set-size(17, 20, 0, 1, $vertical: true);
      @include set-size(4, 5, 0, 1, $vertical: true);
      @include set-size(3, 4, 0, 1, $vertical: true);
      @include set-size(7, 10, 0, 1, $vertical: true);
      @include set-size(13, 20, 0, 1, $vertical: true);
      @include set-size(3, 5, 0, 1, $vertical: true);
      @include set-size(11, 20, 0, 1, $vertical: true);
      @include set-size(1, 2, 0, 1, $vertical: true);
      @include set-size(9, 20, 0, 1, $vertical: true);
      @include set-size(2, 5, 0, 1, $vertical: true);
      @include set-size(7, 20, 0, 1, $vertical: true);
      @include set-size(3, 10, 0, 1, $vertical: true);
      @include set-size(1, 4, 0, 1, $vertical: true);
      @include set-size(1, 5, 0, 1, $vertical: true);
      @include set-size(3, 20, 0, 1, $vertical: true);
      @include set-size(1, 10, 0, 1, $vertical: true);
      @include set-size(1, 20, 0, 1, $vertical: true);

      @extend %fix-columns-vertical;
    }
  }
}

%fix-columns {
  @for $size from 5 through 60 {
    $final-size: #{$size * 5};
    &.w#{$final-size} {
      flex-basis: #{$final-size}px;
      max-width: #{$final-size}px;
    }

    &.h#{$final-size} {
      height: #{$final-size}px;
    }
  }

  @for $size from 61 through 120 {
    $final-size: #{$size * 5};

    &.h#{$final-size} {
      height: #{$final-size}px;
    }
  }
}

%fix-columns-vertical {
  @for $size from 5 through 60 {
    $final-size: #{$size * 5};
    &.w#{$final-size} {
      width: #{$final-size}px;
    }

    &.h#{$final-size} {
      flex-basis: #{$final-size}px;
      max-height: #{$final-size}px;
    }
  }

  @for $size from 61 through 120 {
    $final-size: #{$size * 5};

    &.h#{$final-size} {
      flex-basis: #{$final-size}px;
      max-height: #{$final-size}px;
    }
  }
}

// ------------------------------- spacing

@mixin set-spacing($space) {
  &.sp#{$space * 100} {
    margin-right: -#{$space}rem;
    margin-left: -#{$space}rem;

    > .prefix,
    > .column,
    > .suffix {
      padding-right: #{$space}rem;

      &:first-child {
        padding-left: #{$space}rem;
      }
    }
  }
}

%spacing {
  @include set-spacing(0.25);
  @include set-spacing(0.5);
  @include set-spacing(0.75);
  @include set-spacing(1);
  @include set-spacing(1.25);
  @include set-spacing(1.5);
  @include set-spacing(1.75);
  @include set-spacing(2);
  @include set-spacing(2.25);
  @include set-spacing(2.5);
  @include set-spacing(2.75);
  @include set-spacing(3);
  @include set-spacing(3.25);
  @include set-spacing(3.5);
  @include set-spacing(3.75);
  @include set-spacing(4);
}
